{"ast":null,"code":"import _defineProperty from \"/home/rubenberna/code/Redcarrots/EasyLife/Quitter-app/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/rubenberna/code/Redcarrots/EasyLife/Quitter-app/client/src/components/forms/Form.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport { Form, Transition } from 'semantic-ui-react';\nimport './form.scss';\nimport UiDivider from '../divider/Divider';\nimport UiMessage from '../message/Message';\nimport Intro from '../intro/Intro';\nconst options = [{\n  key: 'm',\n  text: 'Male',\n  value: 'male'\n}, {\n  key: 'f',\n  text: 'Female',\n  value: 'female'\n}, {\n  key: 'o',\n  text: 'Other',\n  value: 'other'\n}];\n\nclass FinalForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formVisible: true,\n      msgVisible: false\n    };\n\n    this.handleChange = (name, e) => {\n      const change = {};\n      let inputValue = e.target.value;\n      if (name === 'voornaam' || name === 'naam') inputValue = inputValue.charAt(0).toUpperCase() + inputValue.slice(1);\n      change[name] = inputValue;\n      this.setState(_objectSpread({}, change));\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            naam = _this$state.naam,\n            voornaam = _this$state.voornaam,\n            email = _this$state.email,\n            telefoonummer = _this$state.telefoonummer,\n            adres = _this$state.adres,\n            reason = _this$state.reason,\n            description = _this$state.description;\n      const cancellationData = {\n        naam,\n        voornaam,\n        email,\n        telefoonummer,\n        adres,\n        reason,\n        description\n      };\n      this.validateForm(cancellationData);\n    };\n\n    this.clearError = key => {\n      const change = {};\n      change[key] = '';\n      this.setState(_objectSpread({}, change));\n    };\n\n    this.verifyEmail = email => {\n      const mailformat = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\n      if (email.match(mailformat)) return true;else return false;\n    };\n\n    this.validateForm = cancellationData => {\n      let change = {};\n      let canBeSubmitted = true; // 1. Check if all fields have an input\n\n      for (let key in cancellationData) {\n        let value = cancellationData[key];\n\n        if (value === undefined || value === '' || value === 'error') {\n          change[key] = 'error';\n          canBeSubmitted = false;\n          this.setState(_objectSpread({}, change));\n        }\n      } // 2. Regex email\n\n\n      if (cancellationData.email) {\n        if (this.verifyEmail(cancellationData.email) === false) {\n          this.setState({\n            email: 'error'\n          });\n          canBeSubmitted = false;\n        }\n      } // 3. Submit form\n\n\n      if (canBeSubmitted) {\n        this.props.sendData(cancellationData); // this.props.toggleFormVisibility()\n\n        this.showFinalMsg();\n      }\n    };\n\n    this.showFinalMsg = () => {\n      this.setState({\n        formVisible: false,\n        msgVisible: true\n      });\n    };\n\n    this.closeMsg = () => {\n      this.setState({\n        msgVisible: false\n      });\n    };\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          voornaam = _this$state2.voornaam,\n          naam = _this$state2.naam,\n          email = _this$state2.email,\n          telefoonummer = _this$state2.telefoonummer,\n          adres = _this$state2.adres,\n          reason = _this$state2.reason,\n          description = _this$state2.description;\n    const _this$props = this.props,\n          formVisible = _this$props.formVisible,\n          msgVisible = _this$props.msgVisible;\n    return React.createElement(React.Fragment, null, React.createElement(Transition, {\n      visible: formVisible,\n      animation: \"fly down\",\n      duration: 1500,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"final-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Intro, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(UiDivider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Naam\",\n      placeholder: \"Naam\",\n      onChange: e => this.handleChange('naam', e),\n      error: naam === 'error',\n      onFocus: e => this.clearError('naam'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Voornaam\",\n      placeholder: \"Voornaam\",\n      onChange: e => this.handleChange('voornaam', e),\n      error: voornaam === 'error',\n      onFocus: e => this.clearError('voornaam'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      fluid: true,\n      label: \"E-mail\",\n      placeholder: \"E-mail\",\n      onChange: e => this.handleChange('email', e),\n      error: email === 'error' && {\n        content: 'Wrong email format',\n        pointing: 'above'\n      },\n      onFocus: e => this.clearError('email'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Telefoonnummer\",\n      placeholder: \"Telefoonnummer\",\n      onChange: e => this.handleChange('telefoonummer', e),\n      error: telefoonummer === 'error',\n      onFocus: e => this.clearError('telefoonummer'),\n      type: \"number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Adres\",\n      placeholder: \"Adres\",\n      onChange: e => this.handleChange('adres', e),\n      error: adres === 'error',\n      onFocus: e => this.clearError('adres'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    })), React.createElement(Form.Select, {\n      fluid: true,\n      label: \"Reason to leave\",\n      options: options,\n      placeholder: \"Reason\",\n      onChange: e => this.setState({\n        'reason': e.target.innerText\n      }),\n      error: reason === 'error',\n      onFocus: e => this.clearError('reason'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), React.createElement(Form.TextArea, {\n      label: \"About\",\n      placeholder: \"Tell us more about what could we do differently...\",\n      onChange: e => this.handleChange('description', e),\n      error: description === 'error',\n      onFocus: e => this.clearError('description'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(Form.Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"Submit\")))), msgVisible && React.createElement(UiMessage, {\n      msgVisible: msgVisible,\n      closeMsg: this.closeMsg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default FinalForm;","map":{"version":3,"sources":["/home/rubenberna/code/Redcarrots/EasyLife/Quitter-app/client/src/components/forms/Form.js"],"names":["React","Component","Form","Transition","UiDivider","UiMessage","Intro","options","key","text","value","FinalForm","state","formVisible","msgVisible","handleChange","name","e","change","inputValue","target","charAt","toUpperCase","slice","setState","handleSubmit","preventDefault","naam","voornaam","email","telefoonummer","adres","reason","description","cancellationData","validateForm","clearError","verifyEmail","mailformat","match","canBeSubmitted","undefined","props","sendData","showFinalMsg","closeMsg","render","content","pointing","innerText"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Form, Transition } from 'semantic-ui-react'\n\nimport './form.scss'\nimport UiDivider from '../divider/Divider'\nimport UiMessage from '../message/Message';\nimport Intro from '../intro/Intro'\n\nconst options = [\n  { key: 'm', text: 'Male', value: 'male' },\n  { key: 'f', text: 'Female', value: 'female' },\n  { key: 'o', text: 'Other', value: 'other' },\n]\n\n\nclass FinalForm extends Component {\n  state = {\n    formVisible: true,\n    msgVisible: false\n  }\n\n  handleChange = (name, e) => {\n    const change = {}\n    let inputValue = e.target.value\n    if (name === 'voornaam' || name === 'naam') inputValue = inputValue.charAt(0).toUpperCase() + inputValue.slice(1)\n    change[name] = inputValue\n    this.setState({ ...change })\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const { naam, voornaam, email, telefoonummer, adres, reason, description } = this.state\n    const cancellationData = {\n      naam,\n      voornaam,\n      email,\n      telefoonummer,\n      adres,\n      reason,\n      description\n    }\n    this.validateForm(cancellationData)\n  }\n\n  clearError = (key) => {\n    const change = {}\n    change[key] = ''\n    this.setState({ ...change })\n  }\n\n  verifyEmail = (email) => {\n    const mailformat = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/\n    if (email.match(mailformat)) return true;\n    else return false;\n  }\n\n  validateForm = (cancellationData) => {\n    let change = {}\n    let canBeSubmitted = true\n\n    // 1. Check if all fields have an input\n    for (let key in cancellationData) {\n      let value = cancellationData[key]\n      if (value === undefined || value === '' || value === 'error') {\n        change[key] = 'error'\n        canBeSubmitted = false\n        this.setState({ ...change })\n      }\n    }\n\n    // 2. Regex email\n    if (cancellationData.email) {\n      if (this.verifyEmail(cancellationData.email) === false) {\n        this.setState({ email: 'error' })\n        canBeSubmitted = false\n      }\n    }\n\n    // 3. Submit form\n    if (canBeSubmitted) {\n      this.props.sendData(cancellationData)\n      // this.props.toggleFormVisibility()\n      this.showFinalMsg()\n    }\n  }\n\n  showFinalMsg = () => {\n    this.setState({\n      formVisible: false,\n      msgVisible: true \n    })\n  }\n\n  closeMsg = () => {\n    this.setState({ msgVisible: false })\n  }\n\n  render() {\n    const { voornaam, naam, email, telefoonummer, adres, reason, description } = this.state\n    const { formVisible, msgVisible } = this.props\n    return (\n      <>\n        <Transition \n          visible={formVisible} \n          animation='fly down' \n          duration={1500}>\n          <div className='final-form'>\n            <Intro/>\n            <UiDivider/>\n            <Form onSubmit={this.handleSubmit}>\n              <Form.Group widths='equal'>\n                <Form.Input \n                  fluid label='Naam' \n                  placeholder='Naam' \n                  onChange={e => this.handleChange('naam', e)} \n                  error={naam === 'error'} \n                  onFocus={e => this.clearError('naam')}\n                />\n                <Form.Input \n                  fluid label='Voornaam' \n                  placeholder='Voornaam' \n                  onChange={e => this.handleChange('voornaam', e)} \n                  error={voornaam === 'error'} \n                  onFocus={e => this.clearError('voornaam')}\n                />\n              </Form.Group>\n              <Form.Group widths='equal'>\n                <Form.Input\n                  fluid label='E-mail' \n                  placeholder='E-mail' \n                  onChange={e => this.handleChange('email', e)} \n                  error={email === 'error' && { content: 'Wrong email format', pointing: 'above'}} \n                  onFocus={e => this.clearError('email')}\n                />\n                <Form.Input \n                  fluid label='Telefoonnummer' \n                  placeholder='Telefoonnummer' \n                  onChange={e => this.handleChange('telefoonummer', e)} \n                  error={telefoonummer === 'error'} \n                  onFocus={e => this.clearError('telefoonummer')}\n                  type='number'\n                />\n              </Form.Group>\n              <Form.Group widths='equal'>\n                <Form.Input \n                  fluid label='Adres' \n                  placeholder='Adres' \n                  onChange={e => this.handleChange('adres', e)} \n                  error={adres === 'error'} \n                  onFocus={e => this.clearError('adres')}\n                />\n              </Form.Group>\n              <Form.Select\n                fluid\n                label='Reason to leave'\n                options={options}\n                placeholder='Reason'\n                onChange={e => this.setState({'reason': e.target.innerText})}\n                error={reason === 'error'}\n                onFocus={e => this.clearError('reason')}\n              />\n              <Form.TextArea \n                label='About' \n                placeholder='Tell us more about what could we do differently...' \n                onChange={e => this.handleChange('description', e)} \n                error={description === 'error'} \n                onFocus={e => this.clearError('description')}\n              />\n              <Form.Button>Submit</Form.Button>\n            </Form>\n          </div>\n        </Transition>\n        { msgVisible && <UiMessage msgVisible={msgVisible} closeMsg={this.closeMsg} />}\n      </>\n    )\n  }\n}\n\nexport default FinalForm\n"]},"metadata":{},"sourceType":"module"}